{% extends "myDesk/layout.html" %}
{% load static %}

{% block body %}

<div class="row section">
  <h2 class="mb-4">{{ user.get_full_name }}</h2>

{% if not vacation_requests%}
<h4> You have no vacation request</h4>
<h5>Use the form below to submit your request</h5>

{% else %}
<h4>Your requests:</h4>

 <ul class="list-group">
    {% for vacation in vacation_requests %}
        <li class="list-group-item m-2 vacation_request">
        <div class="row p-2">
        <div class="col-3 start_date"><span>Start date: {{vacation.start_date}}</span></div>
        <div class="col-3 end_date"><span>End date: {{vacation.end_date}}</span></div>
        <div class="col-3 approved"><span>Approval status: 
          {% if not vacation.processed %}
          Pending
          {% elif vacation.approved %}
          Approved!
          {% else %}
          Denied.
          {% endif %}
        </span></div>
        <div class="col-1">
            <a href="{% url 'edit_request' vacation.id%}">
              <button type="button" class="col btn btn-primary btn-sm edit-vacation_request-btn">Edit</button>
            </a>
        </div>
        <div class="col-1">
            <a href="{% url 'delete_request' vacation.id%}">
              <button type="button" class="col btn btn-danger btn-sm delete-vacation_request-btn">Delete</button>
            </a>
        </div>     
    {% endfor %}
    </ul>
    
    <hr>

{% endif %}
   

 <div class="card section" style="width: 18rem;">
    <div class="card-body"><h4 class="card-title">New vacation request</h4>
    <div>
    <form action="{% url 'add_request' %}" method="post">
            {% csrf_token %}
            {{ vacation_request_form }}
            <button class="btn btn-primary mt-2" type="submit">Send request</button>
     </form>  
    </div>
    </div>
    </div>
    </div>

{% endblock %}